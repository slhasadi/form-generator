!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("@rjsf/utils"),require("lodash-es/get"),require("lodash-es/isEmpty"),require("lodash-es/pick"),require("lodash-es/isObject"),require("lodash-es/set"),require("nanoid"),require("lodash-es/unset"),require("lodash-es/has"),require("lodash-es/omit")):"function"==typeof define&&define.amd?define(["exports","react","@rjsf/utils","lodash-es/get","lodash-es/isEmpty","lodash-es/pick","lodash-es/isObject","lodash-es/set","nanoid","lodash-es/unset","lodash-es/has","lodash-es/omit"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["@rjsf/core"]={},e.React,e.utils,e.get,e._isEmpty,e._pick,e.isObject,e.set,e.nanoid,e.unset,e.has,e.omit)}(this,(function(e,t,a,r,o,i,n,l,s,d,c,u){"use strict";function m(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var p=m(t),h=m(r),f=m(o),g=m(i),y=m(n),S=m(l),E=m(d),b=m(c),v=m(u);function C(){return s.nanoid()}function F(e){return Array.isArray(e)?e.map((e=>({key:C(),item:e}))):[]}function D(e){return Array.isArray(e)?e.map((e=>e.item)):[]}class x extends t.Component{constructor(e){super(e),this._getNewFormDataRow=()=>{const{schema:e,registry:t}=this.props,{schemaUtils:r}=t;let o=e.items;return a.isFixedItems(e)&&a.allowAdditionalItems(e)&&(o=e.additionalItems),r.getDefaultFormState(o)},this.onAddClick=e=>{e&&e.preventDefault();const{onChange:t}=this.props,{keyedFormData:a}=this.state,r=[...a,{key:C(),item:this._getNewFormDataRow()}];this.setState({keyedFormData:r,updatedKeyedFormData:!0},(()=>t(D(r))))},this.onAddIndexClick=e=>t=>{t&&t.preventDefault();const{onChange:a}=this.props,{keyedFormData:r}=this.state,o={key:C(),item:this._getNewFormDataRow()},i=[...r];i.splice(e,0,o),this.setState({keyedFormData:i,updatedKeyedFormData:!0},(()=>a(D(i))))},this.onDropIndexClick=e=>t=>{t&&t.preventDefault();const{onChange:a,errorSchema:r}=this.props,{keyedFormData:o}=this.state;let i;if(r){i={};for(const t in r){const a=parseInt(t);a<e?S.default(i,[a],r[t]):a>e&&S.default(i,[a-1],r[t])}}const n=o.filter(((t,a)=>a!==e));this.setState({keyedFormData:n,updatedKeyedFormData:!0},(()=>a(D(n),i)))},this.onReorderClick=(e,t)=>a=>{a&&(a.preventDefault(),a.currentTarget.blur());const{onChange:r,errorSchema:o}=this.props;let i;if(this.props.errorSchema){i={};for(const a in o){const r=parseInt(a);r==e?S.default(i,[t],o[e]):r==t?S.default(i,[e],o[t]):S.default(i,[a],o[r])}}const{keyedFormData:n}=this.state,l=function(){const a=n.slice();return a.splice(e,1),a.splice(t,0,n[e]),a}();this.setState({keyedFormData:l},(()=>r(D(l),i)))},this.onChangeForIndex=e=>(t,a,r)=>{const{formData:o,onChange:i,errorSchema:n}=this.props;i((Array.isArray(o)?o:[]).map(((a,r)=>e===r?void 0===t?null:t:a)),n&&n&&{...n,[e]:a},r)},this.onSelectChange=e=>{const{onChange:t,idSchema:a}=this.props;t(e,void 0,a&&a.$id)};const{formData:t=[]}=e,r=F(t);this.state={keyedFormData:r,updatedKeyedFormData:!1}}static getDerivedStateFromProps(e,t){if(t.updatedKeyedFormData)return{updatedKeyedFormData:!1};const a=Array.isArray(e.formData)?e.formData:[],r=t.keyedFormData||[];return{keyedFormData:a.length===r.length?r.map(((e,t)=>({key:e.key,item:a[t]}))):F(a)}}get itemTitle(){const{schema:e}=this.props;return h.default(e,[a.ITEMS_KEY,"title"],h.default(e,[a.ITEMS_KEY,"description"],"Item"))}isItemRequired(e){return Array.isArray(e.type)?!e.type.includes("null"):"null"!==e.type}canAddItem(e){const{schema:t,uiSchema:r}=this.props;let{addable:o}=a.getUiOptions(r);return!1!==o&&(o=void 0===t.maxItems||e.length<t.maxItems),o}render(){const{schema:e,uiSchema:t,idSchema:r,registry:o}=this.props,{schemaUtils:i}=o;if(!(a.ITEMS_KEY in e)){const i=a.getUiOptions(t),n=a.getTemplate("UnsupportedFieldTemplate",o,i);return p.default.createElement(n,{schema:e,idSchema:r,reason:"Missing items definition",registry:o})}return i.isMultiSelect(e)?this.renderMultiSelect():a.isCustomWidget(t)?this.renderCustomWidget():a.isFixedItems(e)?this.renderFixedArray():i.isFilesArray(e,t)?this.renderFiles():this.renderNormalArray()}renderNormalArray(){const{schema:e,uiSchema:t={},errorSchema:r,idSchema:o,name:i,disabled:n=!1,readonly:l=!1,autofocus:s=!1,required:d=!1,registry:c,onBlur:u,onFocus:m,idPrefix:h,idSeparator:f="_",rawErrors:g}=this.props,{keyedFormData:S}=this.state,E=void 0===e.title?i:e.title,{schemaUtils:b,formContext:v}=c,C=a.getUiOptions(t),F=y.default(e.items)?e.items:{},x=b.retrieveSchema(F),k=D(this.state.keyedFormData),T={canAdd:this.canAddItem(k),items:S.map(((e,a)=>{const{key:n,item:l}=e,d=l,c=b.retrieveSchema(F,d),p=r?r[a]:void 0,y=b.toIdSchema(c,o.$id+f+a,d,h,f);return this.renderArrayFieldItem({key:n,index:a,name:i&&`${i}-${a}`,canMoveUp:a>0,canMoveDown:a<k.length-1,itemSchema:c,itemIdSchema:y,itemErrorSchema:p,itemData:d,itemUiSchema:t.items,autofocus:s&&0===a,onBlur:u,onFocus:m,rawErrors:g})})),className:`field field-array field-array-of-${x.type}`,disabled:n,idSchema:o,uiSchema:t,onAddClick:this.onAddClick,readonly:l,required:d,schema:e,title:E,formContext:v,formData:k,rawErrors:g,registry:c},N=a.getTemplate("ArrayFieldTemplate",c,C);return p.default.createElement(N,{...T})}renderCustomWidget(){const{schema:e,idSchema:t,uiSchema:r,disabled:o=!1,readonly:i=!1,autofocus:n=!1,required:l=!1,hideError:s,placeholder:d,onBlur:c,onFocus:u,formData:m=[],registry:h,rawErrors:f,name:g}=this.props,{widgets:y,formContext:S}=h,E=e.title||g,{widget:b,...v}=a.getUiOptions(r),C=a.getWidget(e,b,y);return p.default.createElement(C,{id:t&&t.$id,multiple:!0,onChange:this.onSelectChange,onBlur:c,onFocus:u,options:v,schema:e,uiSchema:r,registry:h,value:m,disabled:o,readonly:i,hideError:s,required:l,label:E,placeholder:d,formContext:S,autofocus:n,rawErrors:f})}renderMultiSelect(){const{schema:e,idSchema:t,uiSchema:r,formData:o=[],disabled:i=!1,readonly:n=!1,autofocus:l=!1,required:s=!1,placeholder:d,onBlur:c,onFocus:u,registry:m,rawErrors:h,name:f}=this.props,{widgets:g,schemaUtils:y,formContext:S}=m,E=y.retrieveSchema(e.items,o),b=e.title||f,v=a.optionsList(E),{widget:C="select",...F}=a.getUiOptions(r),D=a.getWidget(e,C,g);return p.default.createElement(D,{id:t&&t.$id,multiple:!0,onChange:this.onSelectChange,onBlur:c,onFocus:u,options:{...F,enumOptions:v},schema:e,uiSchema:r,registry:m,value:o,disabled:i,readonly:n,required:s,label:b,placeholder:d,formContext:S,autofocus:l,rawErrors:h})}renderFiles(){const{schema:e,uiSchema:t,idSchema:r,name:o,disabled:i=!1,readonly:n=!1,autofocus:l=!1,required:s=!1,onBlur:d,onFocus:c,registry:u,formData:m=[],rawErrors:h}=this.props,f=e.title||o,{widgets:g,formContext:y}=u,{widget:S="files",...E}=a.getUiOptions(t),b=a.getWidget(e,S,g);return p.default.createElement(b,{options:E,id:r&&r.$id,multiple:!0,onChange:this.onSelectChange,onBlur:d,onFocus:c,schema:e,uiSchema:t,title:f,value:m,disabled:i,readonly:n,required:s,registry:u,formContext:y,autofocus:l,rawErrors:h,label:""})}renderFixedArray(){const{schema:e,uiSchema:t={},formData:r=[],errorSchema:o,idPrefix:i,idSeparator:n="_",idSchema:l,name:s,disabled:d=!1,readonly:c=!1,autofocus:u=!1,required:m=!1,registry:h,onBlur:f,onFocus:g,rawErrors:S}=this.props,{keyedFormData:E}=this.state;let{formData:b=[]}=this.props;const v=e.title||s,C=a.getUiOptions(t),{schemaUtils:F,formContext:D}=h,x=(y.default(e.items)?e.items:[]).map(((e,t)=>F.retrieveSchema(e,r[t]))),k=y.default(e.additionalItems)?F.retrieveSchema(e.additionalItems,r):null;(!b||b.length<x.length)&&(b=b||[],b=b.concat(new Array(x.length-b.length)));const T={canAdd:this.canAddItem(b)&&!!k,className:"field field-array field-array-fixed-items",disabled:d,idSchema:l,formData:r,items:E.map(((a,r)=>{const{key:d,item:c}=a,m=c,p=r>=x.length,h=p&&y.default(e.additionalItems)?F.retrieveSchema(e.additionalItems,m):x[r],E=F.toIdSchema(h,l.$id+n+r,m,i,n),v=p?t.additionalItems||{}:Array.isArray(t.items)?t.items[r]:t.items||{};return this.renderArrayFieldItem({key:d,index:r,name:s&&`${s}-${r}`,canRemove:p,canMoveUp:r>=x.length+1,canMoveDown:p&&r<b.length-1,itemSchema:h,itemData:m,itemUiSchema:v,itemIdSchema:E,itemErrorSchema:o?o[r]:void 0,autofocus:u&&0===r,onBlur:f,onFocus:g,rawErrors:S})})),onAddClick:this.onAddClick,readonly:c,required:m,registry:h,schema:e,uiSchema:t,title:v,formContext:D,rawErrors:S},N=a.getTemplate("ArrayFieldTemplate",h,C);return p.default.createElement(N,{...T})}renderArrayFieldItem(e){const{key:t,index:r,name:o,canRemove:i=!0,canMoveUp:n=!0,canMoveDown:l=!0,itemSchema:s,itemData:d,itemUiSchema:c,itemIdSchema:u,itemErrorSchema:m,autofocus:h,onBlur:f,onFocus:g,rawErrors:y}=e,{disabled:S,hideError:E,idPrefix:b,idSeparator:v,readonly:C,uiSchema:F,registry:D,formContext:x}=this.props,{fields:{ArraySchemaField:k,SchemaField:T}}=D,N=k||T,{orderable:A=!0,removable:w=!0}=a.getUiOptions(F),O={moveUp:A&&n,moveDown:A&&l,remove:w&&i,toolbar:!1};return O.toolbar=Object.keys(O).some((e=>O[e])),{children:p.default.createElement(N,{name:o,index:r,schema:s,uiSchema:c,formData:d,formContext:x,errorSchema:m,idPrefix:b,idSeparator:v,idSchema:u,required:this.isItemRequired(s),onChange:this.onChangeForIndex(r),onBlur:f,onFocus:g,registry:D,disabled:S,readonly:C,hideError:E,autofocus:h,rawErrors:y}),className:"array-item",disabled:S,hasToolbar:O.toolbar,hasMoveUp:O.moveUp,hasMoveDown:O.moveDown,hasRemove:O.remove,index:r,key:t,onAddIndexClick:this.onAddIndexClick,onDropIndexClick:this.onDropIndexClick,onReorderClick:this.onReorderClick,readonly:C,registry:D,uiSchema:c}}}function k(e){const{schema:t,name:r,uiSchema:o,idSchema:i,formData:n,registry:l,required:s,disabled:d,readonly:c,autofocus:u,onChange:m,onFocus:h,onBlur:f,rawErrors:g}=e,{title:S}=t,{widgets:E,formContext:b}=l,{widget:v="checkbox",...C}=a.getUiOptions(o),F=a.getWidget(t,v,E);let D;if(Array.isArray(t.oneOf))D=a.optionsList({oneOf:t.oneOf.map((e=>{if(y.default(e))return{...e,title:e.title||(!0===e.const?"Yes":"No")}})).filter((e=>e))});else{const e=t,r=t.enum??[!0,!1];D=!e.enumNames&&2===r.length&&r.every((e=>"boolean"==typeof e))?[{value:r[0],label:r[0]?"Yes":"No"},{value:r[1],label:r[1]?"Yes":"No"}]:a.optionsList({enum:r,enumNames:e.enumNames})}return p.default.createElement(F,{options:{...C,enumOptions:D},schema:t,uiSchema:o,id:i&&i.$id,onChange:m,onFocus:h,onBlur:f,label:void 0===S?r:S,value:n,required:s,disabled:d,readonly:c,registry:l,formContext:b,autofocus:u,rawErrors:g})}class T extends t.Component{constructor(e){super(e),this.onOptionChange=e=>{const t=parseInt(e,10),{formData:r,onChange:o,options:i,registry:n}=this.props,{schemaUtils:l}=n,s=l.retrieveSchema(i[t],r);let d;if("object"===a.guessType(r)&&("object"===s.type||s.properties)){d=Object.assign({},r);const e=i.slice();e.splice(t,1);for(const t of e)if(t.properties)for(const e in t.properties)e in d&&E.default(d,e)}o(l.getDefaultFormState(i[t],d,"excludeObjectChildren"),void 0,this.getFieldId()),this.setState({selectedOption:parseInt(e,10)})};const{formData:t,options:r}=this.props;this.state={selectedOption:this.getMatchingOption(0,t,r)}}componentDidUpdate(e,t){const{formData:r,options:o,idSchema:i}=this.props,{selectedOption:n}=this.state;if(!a.deepEquals(r,e.formData)&&i.$id===e.idSchema.$id){const e=this.getMatchingOption(n,r,o);if(!t||e===n)return;this.setState({selectedOption:e})}}getMatchingOption(e,t,a){const{schemaUtils:r}=this.props.registry,o=r.getMatchingOption(t,a);return 0!==o?o:e||0}getFieldId(){const{idSchema:e,schema:t}=this.props;return`${e.$id}${t.oneOf?"__oneof_select":"__anyof_select"}`}render(){const{name:e,baseType:t,disabled:r=!1,readonly:o=!1,hideError:i=!1,errorSchema:n={},formData:l,formContext:s,idPrefix:d,idSeparator:c,idSchema:u,onBlur:m,onChange:h,onFocus:f,options:g,registry:y,uiSchema:S}=this.props,{widgets:E,fields:b}=y,{SchemaField:v}=b,{selectedOption:C}=this.state,{widget:F="select",...D}=a.getUiOptions(S),x=a.getWidget({type:"number"},F,E),k=g[C]||null;let T;k&&(T=k.type?k:Object.assign({},k,{type:t}));const N=g.map(((e,t)=>({label:e.title||`Option ${t+1}`,value:t})));return p.default.createElement("div",{className:"panel panel-default panel-body"},p.default.createElement("div",{className:"form-group"},p.default.createElement(x,{id:this.getFieldId(),schema:{type:"number",default:0},onChange:this.onOptionChange,onBlur:m,onFocus:f,value:C,options:{enumOptions:N},registry:y,formContext:s,...D,label:""})),null!==k&&p.default.createElement(v,{name:e,schema:T,uiSchema:S,errorSchema:n,idSchema:u,idPrefix:d,idSeparator:c,formData:l,formContext:s,onChange:h,onBlur:m,onFocus:f,registry:y,disabled:r,readonly:o,hideError:i}))}}const N=/\.([0-9]*0)*$/,A=/[0.]0*$/;function w(e){const{registry:r,onChange:o,formData:i,value:n}=e,[l,s]=t.useState(n),{StringField:d}=r.fields;let c=i;const u=t.useCallback((e=>{s(e),"."===`${e}`.charAt(0)&&(e=`0${e}`);const t="string"==typeof e&&e.match(N)?a.asNumber(e.replace(A,"")):a.asNumber(e);o(t)}),[o]);if("string"==typeof l&&"number"==typeof c){const e=new RegExp(`${c}`.replace(".","\\.")+"\\.?0*$");l.match(e)&&(c=l)}return p.default.createElement(d,{...e,formData:c,onChange:u})}class O extends t.Component{constructor(){var e;super(...arguments),e=this,this.state={wasPropertyKeyModified:!1,additionalProperties:{}},this.onPropertyChange=function(t,a){return void 0===a&&(a=!1),(r,o,i)=>{const{formData:n,onChange:l,errorSchema:s}=e.props;void 0===r&&a&&(r=""),l({...n,[t]:r},s&&s&&{...s,[t]:o},i)}},this.onDropPropertyClick=e=>t=>{t.preventDefault();const{onChange:a,formData:r}=this.props,o={...r};E.default(o,e),a(o)},this.getAvailableKey=(e,t)=>{const{uiSchema:r}=this.props,{duplicateKeySuffixSeparator:o="-"}=a.getUiOptions(r);let i=0,n=e;for(;n in t;)n=`${e}${o}${++i}`;return n},this.onKeyChange=e=>(t,a)=>{if(e===t)return;const{formData:r,onChange:o,errorSchema:i}=this.props;t=this.getAvailableKey(t,r);const n={...r},l={[e]:t},s=Object.keys(n).map((e=>({[l[e]||e]:n[e]}))),d=Object.assign({},...s);this.setState({wasPropertyKeyModified:!0}),o(d,i&&i&&{...i,[t]:a})},this.handleAddClick=e=>()=>{if(!e.additionalProperties)return;const{formData:t,onChange:r,registry:o}=this.props,i={...t};let n;if(y.default(e.additionalProperties)&&(n=e.additionalProperties.type,a.REF_KEY in e.additionalProperties)){const{schemaUtils:r}=o;n=r.retrieveSchema({$ref:e.additionalProperties[a.REF_KEY]},t).type}const l=this.getAvailableKey("newKey",i);S.default(i,l,this.getDefaultValue(n)),r(i)}}isRequired(e){const{schema:t}=this.props;return Array.isArray(t.required)&&-1!==t.required.indexOf(e)}getDefaultValue(e){switch(e){case"string":default:return"New Value";case"array":return[];case"boolean":return!1;case"null":return null;case"number":return 0;case"object":return{}}}render(){const{schema:e,uiSchema:t={},formData:r,errorSchema:o,idSchema:i,name:n,required:l=!1,disabled:s=!1,readonly:d=!1,hideError:c,idPrefix:u,idSeparator:m,onBlur:f,onFocus:g,registry:y}=this.props,{fields:S,formContext:E,schemaUtils:v}=y,{SchemaField:C}=S,F=v.retrieveSchema(e,r),D=a.getUiOptions(t),{properties:x={}}=F,k=void 0===F.title?n:F.title,T=D.description||F.description;let N;try{const e=Object.keys(x);N=a.orderProperties(e,D.order)}catch(e){return p.default.createElement("div",null,p.default.createElement("p",{className:"config-error",style:{color:"red"}},"Invalid ",n||"root"," object field configuration:",p.default.createElement("em",null,e.message),"."),p.default.createElement("pre",null,JSON.stringify(F)))}const A=a.getTemplate("ObjectFieldTemplate",y,D),w={title:D.title||k,description:T,properties:N.map((e=>{const n=b.default(F,[a.PROPERTIES_KEY,e,a.ADDITIONAL_PROPERTY_FLAG]),S=n?t.additionalProperties:t[e],v="hidden"===a.getUiOptions(S).widget,D=h.default(i,[e],{});return{content:p.default.createElement(C,{key:e,name:e,required:this.isRequired(e),schema:h.default(F,[a.PROPERTIES_KEY,e],{}),uiSchema:S,errorSchema:h.default(o,e),idSchema:D,idPrefix:u,idSeparator:m,formData:h.default(r,e),formContext:E,wasPropertyKeyModified:this.state.wasPropertyKeyModified,onKeyChange:this.onKeyChange(e),onChange:this.onPropertyChange(e,n),onBlur:f,onFocus:g,registry:y,disabled:s,readonly:d,hideError:c,onDropPropertyClick:this.onDropPropertyClick}),name:e,readonly:d,disabled:s,required:l,hidden:v}})),readonly:d,disabled:s,required:l,idSchema:i,uiSchema:t,schema:F,formData:r,formContext:E,registry:y};return p.default.createElement(A,{...w,onAddClick:this.handleAddClick})}}const B={array:"ArrayField",boolean:"BooleanField",integer:"NumberField",number:"NumberField",object:"ObjectField",string:"StringField",null:"NullField"};function I(e){const{schema:t,idSchema:r,uiSchema:o,formData:i,errorSchema:n,idPrefix:l,idSeparator:s,name:d,onChange:c,onKeyChange:u,onDropPropertyClick:m,required:h,registry:f,wasPropertyKeyModified:g=!1}=e,{formContext:S,schemaUtils:E}=f,b=a.getUiOptions(o),C=a.getTemplate("FieldTemplate",f,b),F=a.getTemplate("DescriptionFieldTemplate",f,b),D=a.getTemplate("FieldHelpTemplate",f,b),x=a.getTemplate("FieldErrorTemplate",f,b),k=E.retrieveSchema(t,i),T=r[a.ID_KEY],N=a.mergeObjects(E.toIdSchema(k,T,i,l,s),r),A=p.default.useCallback(((e,t,a)=>c(e,t,a||T)),[T,c]),w=function(e,t,r,o){const i=t.field,{fields:n}=o;if("function"==typeof i)return i;if("string"==typeof i&&i in n)return n[i];const l=a.getSchemaType(e),s=Array.isArray(l)?l[0]:l||"",d=B[s];return d||!e.anyOf&&!e.oneOf?d in n?n[d]:()=>{const i=a.getTemplate("UnsupportedFieldTemplate",o,t);return p.default.createElement(i,{schema:e,idSchema:r,reason:`Unknown field type ${e.type}`,registry:o})}:()=>null}(k,b,N,f),O=Boolean(e.disabled||b.disabled),I=Boolean(e.readonly||b.readonly||e.schema.readOnly||k.readOnly),U=b.hideError,$=void 0===U?e.hideError:Boolean(U),q=Boolean(e.autofocus||b.autofocus);if(0===Object.keys(k).length)return null;const P=E.getDisplayLabel(k,o),{__errors:_,...R}=n||{},V=v.default(o,["ui:classNames","classNames"]);"ui:options"in V&&(V["ui:options"]=v.default(V["ui:options"],["classNames"]));const j=p.default.createElement(w,{...e,onChange:A,idSchema:N,schema:k,uiSchema:V,disabled:O,readonly:I,hideError:$,autofocus:q,errorSchema:R,formContext:S,rawErrors:_}),M=N[a.ID_KEY];let K;K=g||a.ADDITIONAL_PROPERTY_FLAG in k?d:b.title||e.schema.title||k.title||d;const W=b.description||e.schema.description||k.description||"",L=b.help,Y="hidden"===b.widget,z=["form-group","field",`field-${k.type}`];!$&&_&&_.length>0&&z.push("field-error has-error has-danger"),null!=o&&o.classNames&&z.push(o.classNames),b.classNames&&z.push(b.classNames);const H=p.default.createElement(D,{help:L,idSchema:N,schema:k,uiSchema:o,hasErrors:!$&&_&&_.length>0,registry:f}),J=$?void 0:p.default.createElement(x,{errors:_,errorSchema:n,idSchema:N,schema:k,uiSchema:o,registry:f}),G={description:p.default.createElement(F,{id:`${M}__description`,description:W,schema:k,uiSchema:o,registry:f}),rawDescription:W,help:H,rawHelp:"string"==typeof L?L:void 0,errors:J,rawErrors:$?void 0:_,id:M,label:K,hidden:Y,onChange:c,onKeyChange:u,onDropPropertyClick:m,required:h,disabled:O,readonly:I,hideError:$,displayLabel:P,classNames:z.join(" ").trim(),formContext:S,formData:i,schema:k,uiSchema:o,registry:f},Q=f.fields.AnyOfField,X=f.fields.OneOfField;return p.default.createElement(C,{...G},p.default.createElement(p.default.Fragment,null,j,k.anyOf&&!(null!=o&&o["ui:field"])&&!E.isSelect(k)&&p.default.createElement(Q,{name:d,disabled:O,readonly:I,hideError:$,errorSchema:n,formData:i,formContext:S,idPrefix:l,idSchema:N,idSeparator:s,onBlur:e.onBlur,onChange:e.onChange,onFocus:e.onFocus,options:k.anyOf.map((e=>E.retrieveSchema(y.default(e)?e:{},i))),baseType:k.type,registry:f,schema:k,uiSchema:o}),k.oneOf&&!(null!=o&&o["ui:field"])&&!E.isSelect(k)&&p.default.createElement(X,{name:d,disabled:O,readonly:I,hideError:$,errorSchema:n,formData:i,formContext:S,idPrefix:l,idSchema:N,idSeparator:s,onBlur:e.onBlur,onChange:e.onChange,onFocus:e.onFocus,options:k.oneOf.map((e=>E.retrieveSchema(y.default(e)?e:{},i))),baseType:k.type,registry:f,schema:k,uiSchema:o})))}class U extends p.default.Component{shouldComponentUpdate(e){return!a.deepEquals(this.props,e)}render(){return p.default.createElement(I,{...this.props})}}function $(e){const{schema:t,name:r,uiSchema:o,idSchema:i,formData:n,required:l,disabled:s=!1,readonly:d=!1,autofocus:c=!1,onChange:u,onBlur:m,onFocus:h,registry:f,rawErrors:g}=e,{title:y,format:S}=t,{widgets:E,formContext:b,schemaUtils:v}=f,C=v.isSelect(t)?a.optionsList(t):void 0;let F=C?"select":"text";S&&a.hasWidget(t,S,E)&&(F=S);const{widget:D=F,placeholder:x="",...k}=a.getUiOptions(o),T=a.getWidget(t,D,E);return p.default.createElement(T,{options:{...k,enumOptions:C},schema:t,uiSchema:o,id:i&&i.$id,label:void 0===y?r:y,value:n,onChange:u,onBlur:m,onFocus:h,required:l,disabled:s,readonly:d,formContext:b,autofocus:c,registry:f,placeholder:x,rawErrors:g})}function q(e){const{formData:a,onChange:r}=e;return t.useEffect((()=>{void 0===a&&r(null)}),[a,r]),null}function P(e){const{idSchema:t,description:r,registry:o,schema:i,uiSchema:n}=e,l=a.getUiOptions(n),{label:s=!0}=l;if(!r||!s)return null;const d=a.getTemplate("DescriptionFieldTemplate",o,l);return p.default.createElement(d,{id:`${t.$id}__description`,description:r,schema:i,uiSchema:n,registry:o})}function _(e){const{children:t,className:a,disabled:r,hasToolbar:o,hasMoveDown:i,hasMoveUp:n,hasRemove:l,index:s,onDropIndexClick:d,onReorderClick:c,readonly:u,registry:m,uiSchema:h}=e,{MoveDownButton:f,MoveUpButton:g,RemoveButton:y}=m.templates.ButtonTemplates,S={flex:1,paddingLeft:6,paddingRight:6,fontWeight:"bold"};return p.default.createElement("div",{className:a},p.default.createElement("div",{className:o?"col-xs-9":"col-xs-12"},t),o&&p.default.createElement("div",{className:"col-xs-3 array-item-toolbox"},p.default.createElement("div",{className:"btn-group",style:{display:"flex",justifyContent:"space-around"}},(n||i)&&p.default.createElement(g,{style:S,disabled:r||u||!n,onClick:c(s,s-1),uiSchema:h}),(n||i)&&p.default.createElement(f,{style:S,disabled:r||u||!i,onClick:c(s,s+1),uiSchema:h}),l&&p.default.createElement(y,{style:S,disabled:r||u,onClick:d(s),uiSchema:h}))))}function R(e){const{canAdd:t,className:r,disabled:o,idSchema:i,uiSchema:n,items:l,onAddClick:s,readonly:d,registry:c,required:u,schema:m,title:h}=e,f=a.getUiOptions(n),g=a.getTemplate("ArrayFieldDescriptionTemplate",c,f),y=a.getTemplate("ArrayFieldItemTemplate",c,f),S=a.getTemplate("ArrayFieldTitleTemplate",c,f),{ButtonTemplates:{AddButton:E}}=c.templates;return p.default.createElement("fieldset",{className:r,id:i.$id},p.default.createElement(S,{idSchema:i,title:f.title||h,required:u,schema:m,uiSchema:n,registry:c}),p.default.createElement(g,{idSchema:i,description:f.description||m.description,schema:m,uiSchema:n,registry:c}),p.default.createElement("div",{className:"row array-item-list"},l&&l.map((e=>{let{key:t,...a}=e;return p.default.createElement(y,{key:t,...a})}))),t&&p.default.createElement(E,{className:"array-item-add",onClick:s,disabled:o||d,uiSchema:n}))}function V(e){const{idSchema:t,title:r,schema:o,uiSchema:i,required:n,registry:l}=e,s=a.getUiOptions(i),{label:d=!0}=s;if(!r||!d)return null;const c=a.getTemplate("TitleFieldTemplate",l,s);return p.default.createElement(c,{id:`${t.$id}__title`,title:r,required:n,schema:o,uiSchema:i,registry:l})}function j(e){const{id:r,value:o,readonly:i,disabled:n,autofocus:l,onBlur:s,onFocus:d,onChange:c,options:u,schema:m,uiSchema:h,formContext:f,registry:g,rawErrors:y,type:S,...E}=e;if(!r)throw console.log("No id for",e),new Error(`no id for props ${JSON.stringify(e)}`);const b={...E,...a.getInputProps(m,S,u)};let v;v="number"===b.type||"integer"===b.type?o||0===o?o:"":null==o?"":o;const C=t.useCallback((e=>{let{target:{value:t}}=e;return c(""===t?u.emptyValue:t)}),[c,u]),F=t.useCallback((e=>{let{target:{value:t}}=e;return s(r,t)}),[s,r]),D=t.useCallback((e=>{let{target:{value:t}}=e;return d(r,t)}),[d,r]);return p.default.createElement(p.default.Fragment,null,p.default.createElement("input",{id:r,name:r,className:"form-control",readOnly:i,disabled:n,autoFocus:l,value:v,...b,list:m.examples?`examples_${r}`:void 0,onChange:C,onBlur:F,onFocus:D}),Array.isArray(m.examples)&&p.default.createElement("datalist",{key:`datalist_${r}`,id:`examples_${r}`},[...new Set(m.examples.concat(m.default?[m.default]:[]))].map((e=>p.default.createElement("option",{key:e,value:e})))))}function M(e){let{uiSchema:t}=e;const{submitText:r,norender:o,props:i={}}=a.getSubmitButtonOptions(t);return o?null:p.default.createElement("div",null,p.default.createElement("button",{type:"submit",...i,className:`btn btn-info ${i.className}`},r))}function K(e){const{iconType:t="default",icon:a,className:r,uiSchema:o,...i}=e;return p.default.createElement("button",{type:"button",className:`btn btn-${t} ${r}`,...i},p.default.createElement("i",{className:`glyphicon glyphicon-${a}`}))}function W(e){return p.default.createElement(K,{title:"Move down",className:"array-item-move-down",...e,icon:"arrow-down"})}function L(e){return p.default.createElement(K,{title:"Move up",className:"array-item-move-up",...e,icon:"arrow-up"})}function Y(e){return p.default.createElement(K,{title:"Remove",className:"array-item-remove",...e,iconType:"danger",icon:"remove"})}function z(e){let{className:t,onClick:a,disabled:r}=e;return p.default.createElement("div",{className:"row"},p.default.createElement("p",{className:`col-xs-3 col-xs-offset-9 text-right ${t}`},p.default.createElement(K,{iconType:"info",icon:"plus",className:"btn-add col-xs-12",title:"Add",onClick:a,disabled:r})))}function H(e){const{id:t,description:a}=e;return a?p.default.createElement("string"==typeof a?"p":"div",{id:t,className:"field-description"},a):null}function J(e){let{errors:t}=e;return p.default.createElement("div",{className:"panel panel-danger errors"},p.default.createElement("div",{className:"panel-heading"},p.default.createElement("h3",{className:"panel-title"},"Errors")),p.default.createElement("ul",{className:"list-group"},t.map(((e,t)=>p.default.createElement("li",{key:t,className:"list-group-item text-danger"},e.stack)))))}function G(e){const{label:t,required:a,id:r}=e;return t?p.default.createElement("label",{className:"control-label",htmlFor:r},t,a&&p.default.createElement("span",{className:"required"},"*")):null}function Q(e){const{id:t,label:r,children:o,errors:i,help:n,description:l,hidden:s,required:d,displayLabel:c,registry:u,uiSchema:m}=e,h=a.getUiOptions(m),f=a.getTemplate("WrapIfAdditionalTemplate",u,h);return s?p.default.createElement("div",{className:"hidden"},o):p.default.createElement(f,{...e},c&&p.default.createElement(G,{label:r,required:d,id:t}),c&&l?l:null,o,i,n)}function X(e){const{errors:t=[],idSchema:a}=e;return 0===t.length?null:p.default.createElement("div",null,p.default.createElement("ul",{id:`${a.$id}__error`,className:"error-detail bs-callout bs-callout-info"},t.filter((e=>!!e)).map(((e,t)=>p.default.createElement("li",{className:"text-danger",key:t},e)))))}function Z(e){const{idSchema:t,help:a}=e;return a?p.default.createElement("string"==typeof a?"p":"div",{id:`${t.$id}__help`,className:"help-block"},a):null}function ee(e){const{description:t,disabled:r,formData:o,idSchema:i,onAddClick:n,properties:l,readonly:s,registry:d,required:c,schema:u,title:m,uiSchema:h}=e,f=a.getUiOptions(h),g=a.getTemplate("TitleFieldTemplate",d,f),y=a.getTemplate("DescriptionFieldTemplate",d,f),{ButtonTemplates:{AddButton:S}}=d.templates;return p.default.createElement("fieldset",{id:i.$id},(f.title||m)&&p.default.createElement(g,{id:`${i.$id}__title`,title:f.title||m,required:c,schema:u,uiSchema:h,registry:d}),(f.description||t)&&p.default.createElement(y,{id:`${i.$id}__description`,description:f.description||t,schema:u,uiSchema:h,registry:d}),l.map((e=>e.content)),a.canExpand(u,h,o)&&p.default.createElement(S,{className:"object-property-expand",onClick:n(u),disabled:r||s,uiSchema:h}))}function te(e){const{id:t,title:a,required:r}=e;return p.default.createElement("legend",{id:t},a,r&&p.default.createElement("span",{className:"required"},"*"))}function ae(e){const{schema:t,idSchema:a,reason:r}=e;return p.default.createElement("div",{className:"unsupported-field"},p.default.createElement("p",null,"Unsupported field schema",a&&a.$id&&p.default.createElement("span",null," for"," field ",p.default.createElement("code",null,a.$id)),r&&p.default.createElement("em",null,": ",r),"."),t&&p.default.createElement("pre",null,JSON.stringify(t,null,2)))}function re(e){const{id:t,classNames:r,disabled:o,label:i,onKeyChange:n,onDropPropertyClick:l,readonly:s,required:d,schema:c,children:u,uiSchema:m,registry:h}=e,{RemoveButton:f}=h.templates.ButtonTemplates;return p.default.createElement("div",{className:r},a.ADDITIONAL_PROPERTY_FLAG in c?p.default.createElement("div",{className:"row"},p.default.createElement("div",{className:"col-xs-5 form-additional"},p.default.createElement("div",{className:"form-group"},p.default.createElement(G,{label:`${i} Key`,required:d,id:`${t}-key`}),p.default.createElement("input",{className:"form-control",type:"text",id:`${t}-key`,onBlur:e=>n(e.target.value),defaultValue:i}))),p.default.createElement("div",{className:"form-additional form-group col-xs-5"},u),p.default.createElement("div",{className:"col-xs-2"},p.default.createElement(f,{className:"array-item-remove btn-block",style:{border:"0"},disabled:o||s,onClick:l(i),uiSchema:m}))):u)}function oe(e,t){const r=[];for(let o=e;o<=t;o++)r.push({value:o,label:a.pad(o,2)});return r}function ie(e){let{type:t,range:a,value:r,select:o,rootId:i,disabled:n,readonly:l,autofocus:s,registry:d,onBlur:c,onFocus:u}=e;const m=i+"_"+t,{SelectWidget:h}=d.widgets;return p.default.createElement(h,{schema:{type:"integer"},id:m,className:"form-control",options:{enumOptions:oe(a[0],a[1])},placeholder:t,value:r,disabled:n,readonly:l,autofocus:s,onChange:e=>o(t,e),onBlur:c,onFocus:u,registry:d,label:""})}function ne(e){let{time:r=!1,disabled:o=!1,readonly:i=!1,autofocus:n=!1,options:l,id:s,registry:d,onBlur:c,onFocus:u,onChange:m,value:h}=e;const[f,g]=t.useReducer(((e,t)=>({...e,...t})),a.parseDateString(h,r));t.useEffect((()=>{h&&h!==a.toDateString(f,r)&&g(a.parseDateString(h,r))}),[h,f,r]),t.useEffect((()=>{(function(e){return Object.values(e).every((e=>-1!==e))})(f)&&m(a.toDateString(f,r))}),[f,r,m]);const y=t.useCallback(((e,t)=>{g({[e]:t})}),[]),S=t.useCallback((e=>{if(e.preventDefault(),o||i)return;const t=a.parseDateString((new Date).toJSON(),r);g(t)}),[o,i,r]),E=t.useCallback((e=>{e.preventDefault(),o||i||(g(a.parseDateString("",r)),m(void 0))}),[o,i,r,m]);return p.default.createElement("ul",{className:"list-inline"},function(e,t,a){void 0===a&&(a=[1900,(new Date).getFullYear()+2]);const{year:r,month:o,day:i,hour:n,minute:l,second:s}=e,d=[{type:"year",range:a,value:r},{type:"month",range:[1,12],value:o},{type:"day",range:[1,31],value:i}];return t&&d.push({type:"hour",range:[0,23],value:n},{type:"minute",range:[0,59],value:l},{type:"second",range:[0,59],value:s}),d}(f,r,l.yearsRange).map(((e,t)=>p.default.createElement("li",{key:t},p.default.createElement(ie,{rootId:s,select:y,...e,disabled:o,readonly:i,registry:d,onBlur:c,onFocus:u,autofocus:n&&0===t})))),("undefined"===l.hideNowButton||!l.hideNowButton)&&p.default.createElement("li",null,p.default.createElement("a",{href:"#",className:"btn btn-info btn-now",onClick:S},"Now")),("undefined"===l.hideClearButton||!l.hideClearButton)&&p.default.createElement("li",null,p.default.createElement("a",{href:"#",className:"btn btn-warning btn-clear",onClick:E},"Clear")))}function le(e){let{time:t=!0,...a}=e;const{AltDateWidget:r}=a.registry.widgets;return p.default.createElement(r,{time:t,...a})}function se(e){let{schema:r,uiSchema:o,options:i,id:n,value:l,disabled:s,readonly:d,label:c,autofocus:u=!1,onBlur:m,onFocus:h,onChange:f,registry:g}=e;const y=a.getTemplate("DescriptionFieldTemplate",g,i),S=a.schemaRequiresTrueValue(r),E=t.useCallback((e=>f(e.target.checked)),[f]),b=t.useCallback((e=>m(n,e.target.checked)),[m,n]),v=t.useCallback((e=>h(n,e.target.checked)),[h,n]);return p.default.createElement("div",{className:"checkbox "+(s||d?"disabled":"")},r.description&&p.default.createElement(y,{id:n+"__description",description:r.description,schema:r,uiSchema:o,registry:g}),p.default.createElement("label",null,p.default.createElement("input",{type:"checkbox",id:n,name:n,checked:void 0!==l&&l,required:S,disabled:s||d,autoFocus:u,onChange:E,onBlur:b,onFocus:v}),p.default.createElement("span",null,c)))}function de(e){let{id:t,disabled:a,options:{inline:r=!1,enumOptions:o,enumDisabled:i},value:n,autofocus:l=!1,readonly:s,onChange:d}=e;return p.default.createElement("div",{className:"checkboxes",id:t},Array.isArray(o)&&o.map(((e,c)=>{const u=-1!==n.indexOf(e.value),m=Array.isArray(i)&&-1!=i.indexOf(e.value),h=a||m||s?"disabled":"",f=p.default.createElement("span",null,p.default.createElement("input",{type:"checkbox",id:`${t}-${e.value}`,name:t,checked:u,disabled:a||m||s,autoFocus:l&&0===c,onChange:t=>{const a=o.map((e=>{let{value:t}=e;return t}));d(t.target.checked?function(e,t,a){const r=a.indexOf(e);return t.slice(0,r).concat(e,t.slice(r)).sort(((e,t)=>Number(a.indexOf(e)>a.indexOf(t))))}(e.value,n,a):function(e,t){return t.filter((t=>t!==e))}(e.value,n))}}),p.default.createElement("span",null,e.label));return r?p.default.createElement("label",{key:e.value,className:`checkbox-inline ${h}`},f):p.default.createElement("div",{key:e.value,className:`checkbox ${h}`},p.default.createElement("label",null,f))})))}function ce(e){const{disabled:t,readonly:r,options:o,registry:i}=e,n=a.getTemplate("BaseInputTemplate",i,o);return p.default.createElement(n,{type:"color",...e,disabled:t||r})}function ue(e){const{onChange:r,options:o,registry:i}=e,n=a.getTemplate("BaseInputTemplate",i,o),l=t.useCallback((e=>r(e||void 0)),[r]);return p.default.createElement(n,{type:"date",...e,onChange:l})}function me(e){const{onChange:t,value:r,options:o,registry:i}=e,n=a.getTemplate("BaseInputTemplate",i,o);return p.default.createElement(n,{type:"datetime-local",...e,value:a.utcToLocal(r),onChange:e=>t(a.localToUTC(e))})}function pe(e){const{options:t,registry:r}=e,o=a.getTemplate("BaseInputTemplate",r,t);return p.default.createElement(o,{type:"email",...e})}function he(e,t){return null===e?null:e.replace(";base64",`;name=${encodeURIComponent(t)};base64`)}function fe(e){const{name:t,size:a,type:r}=e;return new Promise(((o,i)=>{const n=new window.FileReader;n.onerror=i,n.onload=e=>{var i;"string"==typeof(null===(i=e.target)||void 0===i?void 0:i.result)?o({dataURL:he(e.target.result,t),name:t,size:a,type:r}):o({dataURL:null,name:t,size:a,type:r})},n.readAsDataURL(e)}))}function ge(e){let{filesInfo:t}=e;return 0===t.length?null:p.default.createElement("ul",{className:"file-info"},t.map(((e,t)=>{const{name:a,size:r,type:o}=e;return p.default.createElement("li",{key:t},p.default.createElement("strong",null,a)," (",o,", ",r," bytes)")})))}function ye(e){return e.filter((e=>void 0!==e)).map((e=>{const{blob:t,name:r}=a.dataURItoBlob(e);return{name:r,size:t.size,type:t.type}}))}function Se(e){let{multiple:a,id:r,readonly:o,disabled:i,onChange:n,value:l,autofocus:s=!1,options:d}=e;const c=t.useMemo((()=>Array.isArray(l)?ye(l):ye([l])),[l]),[u,m]=t.useState(c),h=t.useCallback((e=>{var t;e.target.files&&(t=e.target.files,Promise.all(Array.from(t).map(fe))).then((e=>{m(e);const t=e.map((e=>e.dataURL));n(a?t:t[0])}))}),[a,n]);return p.default.createElement("div",null,p.default.createElement("p",null,p.default.createElement("input",{id:r,name:r,type:"file",disabled:o||i,onChange:h,defaultValue:"",autoFocus:s,multiple:a,accept:d.accept?String(d.accept):void 0})),p.default.createElement(ge,{filesInfo:u}))}function Ee(e){let{id:t,value:a}=e;return p.default.createElement("input",{type:"hidden",id:t,name:t,value:void 0===a?"":a})}function be(e){const{options:t,registry:r}=e,o=a.getTemplate("BaseInputTemplate",r,t);return p.default.createElement(o,{type:"password",...e})}function ve(e){let{options:a,value:r,required:o,disabled:i,readonly:n,autofocus:l=!1,onBlur:s,onFocus:d,onChange:c,id:u}=e;const m=Math.random().toString(),{enumOptions:h,enumDisabled:f,inline:g}=a,y=t.useCallback((e=>s(u,e.target.value)),[s,u]),S=t.useCallback((e=>d(u,e.target.value)),[d,u]);return p.default.createElement("div",{className:"field-radio-group",id:u},Array.isArray(h)&&h.map(((e,t)=>{const a=e.value===r,s=Array.isArray(f)&&-1!=f.indexOf(e.value),d=i||s||n?"disabled":"",h=p.default.createElement("span",null,p.default.createElement("input",{type:"radio",id:`${u}-${e.value}`,checked:a,name:m,required:o,value:e.value,disabled:i||s||n,autoFocus:l&&0===t,onChange:()=>c(e.value),onBlur:y,onFocus:S}),p.default.createElement("span",null,e.label));return g?p.default.createElement("label",{key:e.value,className:`radio-inline ${d}`},h):p.default.createElement("div",{key:e.value,className:`radio ${d}`},p.default.createElement("label",null,h))})))}function Ce(e){const{value:t,registry:{templates:{BaseInputTemplate:a}}}=e;return p.default.createElement("div",{className:"field-range-wrapper"},p.default.createElement(a,{type:"range",...e}),p.default.createElement("span",{className:"range-view"},t))}function Fe(e,t){return t?Array.from(e.target.options).slice().filter((e=>e.selected)).map((e=>e.value)):e.target.value}function De(e){let{schema:r,id:o,options:i,value:n,required:l,disabled:s,readonly:d,multiple:c=!1,autofocus:u=!1,onChange:m,onBlur:h,onFocus:f,placeholder:g}=e;const{enumOptions:y,enumDisabled:S}=i,E=c?[]:"",b=t.useCallback((e=>{const t=Fe(e,c);return f(o,a.processSelectValue(r,t,i))}),[f,o,r,c,i]),v=t.useCallback((e=>{const t=Fe(e,c);return h(o,a.processSelectValue(r,t,i))}),[h,o,r,c,i]),C=t.useCallback((e=>{const t=Fe(e,c);return m(a.processSelectValue(r,t,i))}),[m,r,c,i]);return p.default.createElement("select",{id:o,name:o,multiple:c,className:"form-control",value:void 0===n?E:n,required:l,disabled:s||d,autoFocus:u,onBlur:v,onFocus:b,onChange:C},!c&&void 0===r.default&&p.default.createElement("option",{value:""},g),Array.isArray(y)&&y.map(((e,t)=>{let{value:a,label:r}=e;const o=S&&-1!=S.indexOf(a);return p.default.createElement("option",{key:t,value:a,disabled:o},r)})))}function xe(e){let{id:a,options:r={},placeholder:o,value:i,required:n,disabled:l,readonly:s,autofocus:d=!1,onChange:c,onBlur:u,onFocus:m}=e;const h=t.useCallback((e=>{let{target:{value:t}}=e;return c(""===t?r.emptyValue:t)}),[c,r.emptyValue]),f=t.useCallback((e=>{let{target:{value:t}}=e;return u(a,t)}),[u,a]),g=t.useCallback((e=>{let{target:{value:t}}=e;return m(a,t)}),[a,m]);return p.default.createElement("textarea",{id:a,name:a,className:"form-control",value:i||"",placeholder:o,required:n,disabled:l,readOnly:s,autoFocus:d,rows:r.rows,onBlur:f,onFocus:g,onChange:h})}function ke(e){const{options:t,registry:r}=e,o=a.getTemplate("BaseInputTemplate",r,t);return p.default.createElement(o,{...e})}function Te(e){const{options:t,registry:r}=e,o=a.getTemplate("BaseInputTemplate",r,t);return p.default.createElement(o,{type:"url",...e})}function Ne(e){const{options:t,registry:r}=e,o=a.getTemplate("BaseInputTemplate",r,t);return p.default.createElement(o,{type:"number",...e})}function Ae(){return{fields:{AnyOfField:T,ArrayField:x,BooleanField:k,NumberField:w,ObjectField:O,OneOfField:T,SchemaField:U,StringField:$,NullField:q},templates:{ArrayFieldDescriptionTemplate:P,ArrayFieldItemTemplate:_,ArrayFieldTemplate:R,ArrayFieldTitleTemplate:V,ButtonTemplates:{SubmitButton:M,AddButton:z,MoveDownButton:W,MoveUpButton:L,RemoveButton:Y},BaseInputTemplate:j,DescriptionFieldTemplate:H,ErrorListTemplate:J,FieldTemplate:Q,FieldErrorTemplate:X,FieldHelpTemplate:Z,ObjectFieldTemplate:ee,TitleFieldTemplate:te,UnsupportedFieldTemplate:ae,WrapIfAdditionalTemplate:re},widgets:{PasswordWidget:be,RadioWidget:ve,UpDownWidget:Ne,RangeWidget:Ce,SelectWidget:De,TextWidget:ke,DateWidget:ue,DateTimeWidget:me,AltDateWidget:ne,AltDateTimeWidget:le,EmailWidget:pe,URLWidget:Te,TextareaWidget:xe,HiddenWidget:Ee,ColorWidget:ce,FileWidget:Se,CheckboxWidget:se,CheckboxesWidget:de},rootSchema:{},formContext:{}}}xe.defaultProps={autofocus:!1,options:{}};class we extends t.Component{constructor(e){if(super(e),this.formElement=void 0,this.getUsedFormData=(e,t)=>{if(0===t.length&&"object"!=typeof e)return e;const a=g.default(e,t);return Array.isArray(e)?Object.keys(a).map((e=>a[e])):a},this.getFieldNames=(e,t)=>{const r=function(e,o,i){return void 0===o&&(o=[]),void 0===i&&(i=[[]]),Object.keys(e).forEach((n=>{if("object"==typeof e[n]){const t=i.map((e=>[...e,n]));e[n][a.RJSF_ADDITONAL_PROPERTIES_FLAG]&&""!==e[n][a.NAME_KEY]?o.push(e[n][a.NAME_KEY]):r(e[n],o,t)}else n===a.NAME_KEY&&""!==e[n]&&i.forEach((e=>{const a=h.default(t,e);("object"!=typeof a||f.default(a))&&o.push(e)}))})),o};return r(e)},this.onChange=(e,t,r)=>{const{extraErrors:o,omitExtraData:i,liveOmit:n,noValidate:l,liveValidate:s,onChange:d}=this.props,{schemaUtils:c,schema:u}=this.state;(a.isObject(e)||Array.isArray(e))&&(e=this.getStateFromProps(this.props,e).formData);const m=!l&&s;let p={formData:e,schema:u},h=e;if(!0===i&&!0===n){const t=c.retrieveSchema(u,e),a=c.toPathSchema(t,"",e),r=this.getFieldNames(a,e);h=this.getUsedFormData(e,r),p={formData:h}}if(m){const e=this.validate(h);let t=e.errors,a=e.errorSchema;const r=t,i=a;if(o){const r=c.mergeValidationData(e,o);a=r.errorSchema,t=r.errors}p={formData:h,errors:t,errorSchema:a,schemaValidationErrors:r,schemaValidationErrorSchema:i}}else if(!l&&t){const e=o?a.mergeObjects(t,o,"preventDuplicates"):t;p={formData:h,errorSchema:e,errors:c.getValidator().toErrorList(e)}}this.setState(p,(()=>d&&d({...this.state,...p},r)))},this.onBlur=(e,t)=>{const{onBlur:a}=this.props;a&&a(e,t)},this.onFocus=(e,t)=>{const{onFocus:a}=this.props;a&&a(e,t)},this.onSubmit=e=>{if(e.preventDefault(),e.target!==e.currentTarget)return;e.persist();const{omitExtraData:t,extraErrors:a,noValidate:r,onSubmit:o}=this.props;let{formData:i}=this.state;const{schema:n,schemaUtils:l}=this.state;if(!0===t){const e=l.retrieveSchema(n,i),t=l.toPathSchema(e,"",i),a=this.getFieldNames(t,i);i=this.getUsedFormData(i,a)}if(r||this.validateForm()){const t=a||{},r=a?l.getValidator().toErrorList(a):[];this.setState({formData:i,errors:r,errorSchema:t,schemaValidationErrors:[],schemaValidationErrorSchema:{}},(()=>{o&&o({...this.state,formData:i,status:"submitted"},e)}))}},!e.validator)throw new Error("A validator is required for Form functionality to work");this.state=this.getStateFromProps(e,e.formData),this.props.onChange&&!a.deepEquals(this.state.formData,this.props.formData)&&this.props.onChange(this.state),this.formElement=p.default.createRef()}UNSAFE_componentWillReceiveProps(e){const t=this.getStateFromProps(e,e.formData);a.deepEquals(t.formData,e.formData)||a.deepEquals(t.formData,this.state.formData)||!e.onChange||e.onChange(t),this.setState(t)}getStateFromProps(e,t){const r=this.state||{},o="schema"in e?e.schema:this.props.schema,i=("uiSchema"in e?e.uiSchema:this.props.uiSchema)||{},n=void 0!==t,l=n&&!e.noValidate&&("liveValidate"in e?e.liveValidate:this.props.liveValidate),s=o;let d=r.schemaUtils;d&&!d.doesSchemaUtilsDiffer(e.validator,s)||(d=a.createSchemaUtils(e.validator,s));const c=d.getDefaultFormState(o,t),u=d.retrieveSchema(o,c);let m,p,h=r.schemaValidationErrors,f=r.schemaValidationErrorSchema;if(l){const e=this.validate(c,o,d);m=e.errors,p=e.errorSchema,h=m,f=p}else{const t=e.noValidate?{errors:[],errorSchema:{}}:e.liveValidate?{errors:r.errors||[],errorSchema:r.errorSchema||{}}:{errors:r.schemaValidationErrors||[],errorSchema:r.schemaValidationErrorSchema||{}};m=t.errors,p=t.errorSchema}if(e.extraErrors){const t=d.mergeValidationData({errorSchema:p,errors:m},e.extraErrors);p=t.errorSchema,m=t.errors}const g=d.toIdSchema(u,i["ui:rootFieldId"],c,e.idPrefix,e.idSeparator);return{schemaUtils:d,schema:o,uiSchema:i,idSchema:g,formData:c,edit:n,errors:m,errorSchema:p,schemaValidationErrors:h,schemaValidationErrorSchema:f}}shouldComponentUpdate(e,t){return a.shouldRender(this,e,t)}validate(e,t,a){void 0===t&&(t=this.props.schema);const r=a||this.state.schemaUtils,{customValidate:o,transformErrors:i}=this.props,n=r.retrieveSchema(t,e);return r.getValidator().validateFormData(e,n,o,i)}renderErrors(e){const{errors:t,errorSchema:r,schema:o,uiSchema:i}=this.state,{formContext:n}=this.props,l=a.getUiOptions(i),s=a.getTemplate("ErrorListTemplate",e,l);return t&&t.length?p.default.createElement(s,{errors:t,errorSchema:r||{},schema:o,uiSchema:i,formContext:n}):null}getRegistry(){var e;const{schemaUtils:t}=this.state,{fields:a,templates:r,widgets:o,formContext:i}=Ae();return{fields:{...a,...this.props.fields},templates:{...r,...this.props.templates,ButtonTemplates:{...r.ButtonTemplates,...null===(e=this.props.templates)||void 0===e?void 0:e.ButtonTemplates}},widgets:{...o,...this.props.widgets},rootSchema:this.props.schema,formContext:this.props.formContext||i,schemaUtils:t}}submit(){this.formElement.current&&(this.formElement.current.dispatchEvent(new CustomEvent("submit",{cancelable:!0})),this.formElement.current.requestSubmit())}validateForm(){const{extraErrors:e,onError:t}=this.props,{formData:a}=this.state,{schemaUtils:r}=this.state,o=this.validate(a);let i=o.errors,n=o.errorSchema;const l=i,s=n;if(i.length>0){if(e){const t=r.mergeValidationData(o,e);n=t.errorSchema,i=t.errors}return this.setState({errors:i,errorSchema:n,schemaValidationErrors:l,schemaValidationErrorSchema:s},(()=>{t?t(i):console.error("Form validation failed",i)})),!1}return!0}render(){const{children:e,id:t,idPrefix:a,idSeparator:r,className:o="",tagName:i,name:n,method:l,target:s,action:d,autoComplete:c,enctype:u,acceptcharset:m,noHtml5Validate:h=!1,disabled:f=!1,readonly:g=!1,formContext:y,showErrorList:S="top",_internalFormWrapper:E}=this.props,{schema:b,uiSchema:v,formData:C,errorSchema:F,idSchema:D}=this.state,x=this.getRegistry(),{SchemaField:k}=x.fields,{SubmitButton:T}=x.templates.ButtonTemplates;return p.default.createElement(E||i||"form",{className:o||"rjsf",id:t,name:n,method:l,target:s,action:d,autoComplete:c,encType:u,acceptCharset:m,noValidate:h,onSubmit:this.onSubmit,as:E?i:void 0,ref:this.formElement},"top"===S&&this.renderErrors(x),p.default.createElement(k,{name:"",schema:b,uiSchema:v,errorSchema:F,idSchema:D,idPrefix:a,idSeparator:r,formContext:y,formData:C,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,registry:x,disabled:f,readonly:g}),e||p.default.createElement(T,{uiSchema:v}),"bottom"===S&&this.renderErrors(x))}}e.default=we,e.getDefaultRegistry=Ae,e.withTheme=function(e){return t.forwardRef(((t,a)=>{var r,o;let{fields:i,widgets:n,templates:l,...s}=t;return i={...e.fields,...i},n={...e.widgets,...n},l={...e.templates,...l,ButtonTemplates:{...null==e||null===(r=e.templates)||void 0===r?void 0:r.ButtonTemplates,...null===(o=l)||void 0===o?void 0:o.ButtonTemplates}},p.default.createElement(we,{...e,...s,fields:i,widgets:n,templates:l,ref:a})}))},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=core.umd.production.min.js.map
