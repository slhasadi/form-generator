"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@rjsf/core"),t=require("react"),a=require("antd/lib/button"),l=require("antd/lib/col"),r=require("antd/lib/row"),n=require("@rjsf/utils"),o=require("classnames"),d=require("antd/lib/config-provider/context"),i=require("antd/lib/input"),u=require("antd/lib/input-number"),s=require("antd/lib/alert"),c=require("antd/lib/list"),m=require("antd/lib/space"),f=require("@ant-design/icons/ExclamationCircleOutlined"),p=require("@ant-design/icons/ArrowDownOutlined"),y=require("@ant-design/icons/ArrowUpOutlined"),g=require("@ant-design/icons/DeleteOutlined"),h=require("@ant-design/icons/PlusCircleOutlined"),v=require("antd/lib/form"),b=require("lodash/isObject"),E=require("lodash/isNumber"),C=require("lodash/isString"),x=require("antd/lib/checkbox"),w=require("dayjs"),A=require("rc-picker/lib/generate/dayjs"),S=require("antd/lib/date-picker/generatePicker"),T=require("antd/lib/radio"),F=require("antd/lib/slider"),k=require("antd/lib/select");function B(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var D=B(t),q=B(a),N=B(l),O=B(r),$=B(o),P=B(i),I=B(u),W=B(s),j=B(c),_=B(m),M=B(f),R=B(p),U=B(y),G=B(g),Y=B(h),V=B(v),K=B(b),L=B(E),z=B(C),H=B(x),J=B(w),Q=B(A),X=B(S),Z=B(T),ee=B(F),te=B(k);const ae={width:"100%"},le={width:"calc(100% / 3)"},re={paddingBottom:"8px"},ne=e=>{let{canAdd:t,className:a,disabled:l,formContext:r,idSchema:o,items:d,onAddClick:i,prefixCls:u,readonly:s,registry:c,required:m,schema:f,title:p,uiSchema:y}=e;const g=n.getUiOptions(y),h=n.getTemplate("ArrayFieldDescriptionTemplate",c,g),v=n.getTemplate("ArrayFieldItemTemplate",c,g),b=n.getTemplate("ArrayFieldTitleTemplate",c,g),{ButtonTemplates:{AddButton:E}}=c.templates,{labelAlign:C="right",rowGutter:x=24}=r,w=`${u}-item-label`,A=$.default(w,"left"===C&&`${w}-left`);return D.default.createElement("fieldset",{className:a,id:o.$id},D.default.createElement(O.default,{gutter:x},(g.title||p)&&D.default.createElement(N.default,{className:A,span:24},D.default.createElement(b,{idSchema:o,required:m,title:g.title||p,schema:f,uiSchema:y,registry:c})),(g.description||f.description)&&D.default.createElement(N.default,{span:24,style:re},D.default.createElement(h,{description:g.description||f.description||"",idSchema:o,schema:f,uiSchema:y,registry:c})),D.default.createElement(N.default,{className:"row array-item-list",span:24},d&&d.map((e=>{let{key:t,...a}=e;return D.default.createElement(v,{key:t,...a})}))),t&&D.default.createElement(N.default,{span:24},D.default.createElement(O.default,{gutter:x,justify:"end"},D.default.createElement(N.default,{flex:"192px"},D.default.createElement(E,{className:"array-item-add",disabled:l||s,onClick:i,uiSchema:y}))))))};var oe=d.withConfigConsumer({prefixCls:"form"})(ne);const de={width:"100%"};function ie(e){const{iconType:t="default",icon:a,uiSchema:l,...r}=e;return D.default.createElement(q.default,{type:t,icon:a,...r})}const ue={span:24},se={span:24},ce={paddingBottom:"8px"},me=e=>{let{description:t,disabled:a,formContext:l,formData:r,idSchema:o,onAddClick:d,prefixCls:i,properties:u,readonly:s,required:c,registry:m,schema:f,title:p,uiSchema:y}=e;const g=n.getUiOptions(y),h=n.getTemplate("TitleFieldTemplate",m,g),v=n.getTemplate("DescriptionFieldTemplate",m,g),{ButtonTemplates:{AddButton:b}}=m.templates,{colSpan:E=24,labelAlign:C="right",rowGutter:x=24}=l,w=`${i}-item-label`,A=$.default(w,"left"===C&&`${w}-left`),S=e=>e.content.props.uiSchema,T=e=>{const t=(e=>(e=>e.content.props.schema)(e).type)(e),a=(e=>n.getUiOptions(S(e)).field)(e),l=(e=>n.getUiOptions(S(e)).widget)(e),r=u.length<2||"object"===t||"array"===t||"textarea"===l?24:12;if(K.default(E)){const e=E;if(z.default(l))return e[l];if(z.default(a))return e[a];if(z.default(t))return e[t]}return L.default(E)?E:r};return D.default.createElement("fieldset",{id:o.$id},D.default.createElement(O.default,{gutter:x},(g.title||p)&&D.default.createElement(N.default,{className:A,span:24},D.default.createElement(h,{id:`${o.$id}-title`,required:c,title:g.title||p,schema:f,uiSchema:y,registry:m})),(g.description||t)&&D.default.createElement(N.default,{span:24,style:ce},D.default.createElement(v,{description:g.description||t,id:`${o.$id}-description`,schema:f,uiSchema:y,registry:m})),u.filter((e=>!e.hidden)).map((e=>D.default.createElement(N.default,{key:e.name,span:T(e)},e.content)))),n.canExpand(f,y,r)&&D.default.createElement(N.default,{span:24},D.default.createElement(O.default,{gutter:x,justify:"end"},D.default.createElement(N.default,{flex:"192px"},D.default.createElement(b,{className:"object-property-expand",disabled:a||s,onClick:d(f),uiSchema:y})))))};var fe=d.withConfigConsumer({prefixCls:"form"})(me);const pe=e=>{let{id:t,prefixCls:a,required:l,registry:r,formContext:n,title:o}=e;const{formContext:d}=r,{colon:i=!0}={...n,...d};let u=o;i&&"string"==typeof o&&""!==o.trim()&&(u=o.replace(/[ï¼š:]\s*$/,""));const s=$.default({[`${a}-item-required`]:l,[`${a}-item-no-colon`]:!i});return o?D.default.createElement("label",{className:s,htmlFor:t,onClick:()=>{if(!t)return;const e=document.querySelector(`[id="${t}"]`);e&&e.focus&&e.focus()},title:"string"==typeof o?o:""},u):null};pe.defaultProps={formContext:{}};const ye={span:24},ge={span:24},he={width:"100%"},ve={ArrayFieldItemTemplate:e=>{let{children:t,disabled:a,hasMoveDown:l,hasMoveUp:r,hasRemove:n,hasToolbar:o,index:d,onDropIndexClick:i,onReorderClick:u,readonly:s,registry:c,uiSchema:m}=e;const{MoveDownButton:f,MoveUpButton:p,RemoveButton:y}=c.templates.ButtonTemplates,{rowGutter:g=24,toolbarAlign:h="top"}=c.formContext;return D.default.createElement(O.default,{align:h,key:`array-item-${d}`,gutter:g},D.default.createElement(N.default,{flex:"1"},t),o&&D.default.createElement(N.default,{flex:"192px"},D.default.createElement(q.default.Group,{style:ae},(r||l)&&D.default.createElement(p,{disabled:a||s||!r,onClick:u(d,d-1),style:le,uiSchema:m}),(r||l)&&D.default.createElement(f,{disabled:a||s||!l,onClick:u(d,d+1),style:le,uiSchema:m}),n&&D.default.createElement(y,{disabled:a||s,onClick:i(d),style:le,uiSchema:m}))))},ArrayFieldTemplate:oe,BaseInputTemplate:e=>{let{disabled:t,formContext:a,id:l,onBlur:r,onChange:o,onFocus:d,options:i,placeholder:u,readonly:s,schema:c,value:m,type:f}=e;const p=n.getInputProps(c,f,i,!1),{readonlyAsDisabled:y=!0}=a,g=e=>{let{target:t}=e;return r(l,t.value)},h=e=>{let{target:t}=e;return d(l,t.value)},v="number"===p.type||"integer"===p.type?D.default.createElement(I.default,{disabled:t||y&&s,id:l,name:l,onBlur:s?void 0:g,onChange:s?void 0:e=>o(e),onFocus:s?void 0:h,placeholder:u,style:de,list:c.examples?`examples_${l}`:void 0,...p,value:m}):D.default.createElement(P.default,{disabled:t||y&&s,id:l,name:l,onBlur:s?void 0:g,onChange:s?void 0:e=>{let{target:t}=e;return o(""===t.value?i.emptyValue:t.value)},onFocus:s?void 0:h,placeholder:u,style:de,list:c.examples?`examples_${l}`:void 0,...p,value:m});return D.default.createElement(D.default.Fragment,null,v,c.examples&&D.default.createElement("datalist",{id:`examples_${l}`},c.examples.concat(c.default?[c.default]:[]).map((e=>D.default.createElement("option",{key:e,value:e})))))},ButtonTemplates:{AddButton:function(e){return D.default.createElement(ie,{title:"Add Item",...e,block:!0,iconType:"primary",icon:D.default.createElement(Y.default,null)})},MoveDownButton:function(e){return D.default.createElement(ie,{title:"Move down",...e,icon:D.default.createElement(R.default,null)})},MoveUpButton:function(e){return D.default.createElement(ie,{title:"Move up",...e,icon:D.default.createElement(U.default,null)})},RemoveButton:function(e){const t=n.getUiOptions(e.uiSchema);return D.default.createElement(ie,{title:"Remove",...e,danger:!0,block:!!t.block,iconType:"primary",icon:D.default.createElement(G.default,null)})},SubmitButton:e=>{let{uiSchema:t}=e;const{submitText:a,norender:l,props:r}=n.getSubmitButtonOptions(t);return l?null:D.default.createElement(q.default,{type:"submit",...r,htmlType:"submit"},a)}},DescriptionFieldTemplate:e=>{let{description:t,id:a}=e;return t?D.default.createElement("span",{id:a},t):null},ErrorListTemplate:e=>{let{errors:t}=e;return D.default.createElement(W.default,{className:"panel panel-danger errors",description:D.default.createElement(j.default,{className:"list-group",size:"small"},t.map(((e,t)=>D.default.createElement(j.default.Item,{key:t},D.default.createElement(_.default,null,D.default.createElement(M.default,null),e.stack))))),message:"Errors",type:"error"})},FieldErrorTemplate:function(e){const{errors:t=[],idSchema:a}=e;if(0===t.length)return null;const l=`${a.$id}__error`;return D.default.createElement("div",{id:l},t.map((e=>D.default.createElement("div",{key:`field-${l}-error-${e}`},e))))},FieldTemplate:e=>{let{children:t,classNames:a,description:l,disabled:r,displayLabel:o,errors:d,formContext:i,help:u,hidden:s,id:c,label:m,onDropPropertyClick:f,onKeyChange:p,rawErrors:y,rawDescription:g,rawHelp:h,readonly:v,registry:b,required:E,schema:C,uiSchema:x}=e;const{colon:w,labelCol:A=ue,wrapperCol:S=se,wrapperStyle:T}=i,F=n.getUiOptions(x),k=n.getTemplate("WrapIfAdditionalTemplate",b,F);return s?D.default.createElement("div",{className:"field-hidden"},t):D.default.createElement(k,{classNames:a,disabled:r,id:c,label:m,onDropPropertyClick:f,onKeyChange:p,readonly:v,required:E,schema:C,uiSchema:x,registry:b},"root"===c?t:D.default.createElement(V.default.Item,{colon:w,extra:g&&l,hasFeedback:"array"!==C.type&&"object"!==C.type,help:!!h&&u||(null!=y&&y.length?d:void 0),htmlFor:c,label:o&&m,labelCol:A,required:E,style:T,validateStatus:null!=y&&y.length?"error":void 0,wrapperCol:S},t))},ObjectFieldTemplate:fe,TitleFieldTemplate:d.withConfigConsumer({prefixCls:"form"})(pe),WrapIfAdditionalTemplate:e=>{let{children:t,classNames:a,disabled:l,id:r,label:o,onDropPropertyClick:d,onKeyChange:i,readonly:u,required:s,registry:c,schema:m,uiSchema:f}=e;const{colon:p,labelCol:y=ye,readonlyAsDisabled:g=!0,rowGutter:h=24,toolbarAlign:v="top",wrapperCol:b=ge,wrapperStyle:E}=c.formContext,{RemoveButton:C}=c.templates.ButtonTemplates,x=`${o} Key`;if(!(n.ADDITIONAL_PROPERTY_FLAG in m))return D.default.createElement("div",{className:a},t);const w=f?f[n.UI_OPTIONS_KEY]:{},A={...f,[n.UI_OPTIONS_KEY]:{...w,block:!0}};return D.default.createElement("div",{className:a},D.default.createElement(O.default,{align:v,gutter:h},D.default.createElement(N.default,{className:"form-additional",flex:"1"},D.default.createElement("div",{className:"form-group"},D.default.createElement(V.default.Item,{colon:p,className:"form-group",hasFeedback:!0,htmlFor:`${r}-key`,label:x,labelCol:y,required:s,style:E,wrapperCol:b},D.default.createElement(P.default,{className:"form-control",defaultValue:o,disabled:l||g&&u,id:`${r}-key`,name:`${r}-key`,onBlur:u?void 0:e=>{let{target:t}=e;return i(t.value)},style:he,type:"text"})))),D.default.createElement(N.default,{className:"form-additional",flex:"1"},t),D.default.createElement(N.default,{flex:"192px"},D.default.createElement(C,{className:"array-item-remove",disabled:l||u,onClick:d(o),uiSchema:A}))))}},be=(e,t)=>{const a=[];for(let l=e;l<=t;l++)a.push({value:l,label:n.pad(l,2)});return a},Ee=e=>{let{autofocus:a,disabled:l,formContext:r,id:o,onBlur:d,onChange:i,onFocus:u,options:s,readonly:c,registry:m,showTime:f,value:p}=e;const{SelectWidget:y}=m.widgets,{rowGutter:g=24}=r,[h,v]=t.useState(n.parseDateString(p,f));t.useEffect((()=>{v(n.parseDateString(p,f))}),[f,p]);const b=(e,t)=>{const a={...h,[e]:void 0===t?-1:t};(e=>Object.values(e).every((e=>-1!==e)))(a)?i(n.toDateString(a,f)):v(a)};return D.default.createElement(O.default,{gutter:[Math.floor(g/2),Math.floor(g/2)]},function(e,t,a){void 0===a&&(a=[1900,(new Date).getFullYear()+2]);const{year:l,month:r,day:n,hour:o,minute:d,second:i}=e,u=[{type:"year",range:a,value:l},{type:"month",range:[1,12],value:r},{type:"day",range:[1,31],value:n}];return t&&u.push({type:"hour",range:[0,23],value:o||-1},{type:"minute",range:[0,59],value:d||-1},{type:"second",range:[0,59],value:i||-1}),u}(h,f,s.yearsRange).map(((e,t)=>{const r=o+"_"+e.type;return D.default.createElement(N.default,{flex:"88px",key:r},(e=>D.default.createElement(y,{autofocus:e.autofocus,className:"form-control",disabled:e.disabled,id:e.id,name:e.name,onBlur:e.onBlur,onChange:t=>e.select(e.type,t),onFocus:e.onFocus,options:{enumOptions:be(e.range[0],e.range[1])},placeholder:e.type,readonly:e.readonly,schema:{type:"integer"},value:e.value,registry:m,label:""}))({...e,autofocus:a&&0===t,disabled:l,id:r,name:o,onBlur:d,onFocus:u,readonly:c,registry:m,select:b,value:e.value<0?void 0:e.value}))})),!s.hideNowButton&&D.default.createElement(N.default,{flex:"88px"},D.default.createElement(q.default,{block:!0,className:"btn-now",onClick:e=>{if(e.preventDefault(),l||c)return;const t=n.parseDateString((new Date).toJSON(),f);i(n.toDateString(t,f))},type:"primary"},"Now")),!s.hideClearButton&&D.default.createElement(N.default,{flex:"88px"},D.default.createElement(q.default,{block:!0,className:"btn-clear",danger:!0,onClick:e=>{e.preventDefault(),l||c||i(void 0)},type:"primary"},"Clear")))},Ce=e=>{const{AltDateWidget:t}=e.registry.widgets;return D.default.createElement(t,{showTime:!0,...e})};Ce.defaultProps={...Ee.defaultProps={autofocus:!1,disabled:!1,options:{yearsRange:[1900,(new Date).getFullYear()+2]},readonly:!1,showTime:!1},showTime:!0};const xe=X.default(Q.default),we={width:"100%"},Ae={width:"100%"},Se={width:"100%"},Te=e=>{let{autofocus:t,disabled:a,formContext:l,id:r,multiple:o,onBlur:d,onChange:i,onFocus:u,options:s,placeholder:c,readonly:m,schema:f,value:p}=e;const{readonlyAsDisabled:y=!0}=l,{enumOptions:g,enumDisabled:h}=s,v={name:r};return D.default.createElement(te.default,{autoFocus:t,disabled:a||y&&m,getPopupContainer:e=>e.parentNode,id:r,mode:void 0!==o?"multiple":void 0,onBlur:m?void 0:()=>d(r,n.processSelectValue(f,p,s)),onChange:m?void 0:e=>i(n.processSelectValue(f,e,s)),onFocus:m?void 0:()=>u(r,n.processSelectValue(f,p,s)),placeholder:c,style:Se,value:void 0!==p?(b=p,Array.isArray(b)?p.map(String):String(p)):void 0,...v},Array.isArray(g)&&g.map((e=>{let{value:t,label:a}=e;return D.default.createElement(te.default.Option,{disabled:Array.isArray(h)&&-1!==h.indexOf(t),key:String(t),value:String(t)},a)})));var b};Te.defaultProps={formContext:{}};const Fe={width:"100%"},ke={AltDateTimeWidget:Ce,AltDateWidget:Ee,CheckboxesWidget:e=>{let{autofocus:t,disabled:a,formContext:l,id:r,onBlur:n,onChange:o,onFocus:d,options:i,readonly:u,value:s}=e;const{readonlyAsDisabled:c=!0}=l,{enumOptions:m,enumDisabled:f,inline:p}=i,y={id:r,onBlur:u?void 0:e=>{let{target:t}=e;return n(r,t.value)},onFocus:u?void 0:e=>{let{target:t}=e;return d(r,t.value)}};return Array.isArray(m)&&m.length>0?D.default.createElement(H.default.Group,{disabled:a||c&&u,name:r,onChange:u?void 0:e=>o(e),value:s,...y},Array.isArray(m)&&m.map(((e,a)=>{let{value:l,label:n}=e;return D.default.createElement("span",{key:l},D.default.createElement(H.default,{id:`${r}-${l}`,name:r,autoFocus:0===a&&t,disabled:Array.isArray(f)&&-1!==f.indexOf(s),value:l},n),!p&&D.default.createElement("br",null))}))):null},CheckboxWidget:e=>{let{autofocus:t,disabled:a,formContext:l,id:r,label:n,onBlur:o,onChange:d,onFocus:i,readonly:u,value:s}=e;const{readonlyAsDisabled:c=!0}=l;return D.default.createElement(H.default,{autoFocus:t,checked:void 0!==s&&s,disabled:a||c&&u,id:r,name:r,onChange:u?void 0:e=>{let{target:t}=e;return d(t.checked)},onBlur:u?void 0:e=>{let{target:t}=e;return o(r,t.checked)},onFocus:u?void 0:e=>{let{target:t}=e;return i(r,t.checked)}},n)},DateTimeWidget:e=>{let{disabled:t,formContext:a,id:l,onBlur:r,onChange:n,onFocus:o,placeholder:d,readonly:i,value:u}=e;const{readonlyAsDisabled:s=!0}=a;return D.default.createElement(xe,{disabled:t||s&&i,getPopupContainer:e=>e.parentNode,id:l,name:l,onBlur:i?void 0:()=>r(l,u),onChange:i?void 0:e=>n(e&&e.toISOString()),onFocus:i?void 0:()=>o(l,u),placeholder:d,showTime:!0,style:we,value:u&&J.default(u)})},DateWidget:e=>{let{disabled:t,formContext:a,id:l,onBlur:r,onChange:n,onFocus:o,placeholder:d,readonly:i,value:u}=e;const{readonlyAsDisabled:s=!0}=a;return D.default.createElement(xe,{disabled:t||s&&i,getPopupContainer:e=>e.parentNode,id:l,name:l,onBlur:i?void 0:()=>r(l,u),onChange:i?void 0:e=>n(e&&e.format("YYYY-MM-DD")),onFocus:i?void 0:()=>o(l,u),placeholder:d,showTime:!1,style:Ae,value:u&&J.default(u)})},PasswordWidget:e=>{let{disabled:t,formContext:a,id:l,onBlur:r,onChange:n,onFocus:o,options:d,placeholder:i,readonly:u,value:s}=e;const{readonlyAsDisabled:c=!0}=a,m=d.emptyValue||"";return D.default.createElement(P.default.Password,{disabled:t||c&&u,id:l,name:l,onBlur:u?void 0:e=>{let{target:t}=e;return r(l,t.value)},onChange:u?void 0:e=>{let{target:t}=e;return n(""===t.value?m:t.value)},onFocus:u?void 0:e=>{let{target:t}=e;return o(l,t.value)},placeholder:i,value:s||""})},RadioWidget:e=>{let{autofocus:t,disabled:a,formContext:l,id:r,onBlur:n,onChange:o,onFocus:d,options:i,readonly:u,schema:s,value:c}=e;const{readonlyAsDisabled:m=!0}=l,{enumOptions:f,enumDisabled:p}=i;return D.default.createElement(Z.default.Group,{disabled:a||m&&u,id:r,name:r,onChange:u?void 0:e=>{let{target:{value:t}}=e;return o("boolean"===s.type?"false"!==t:t)},onBlur:u?void 0:e=>{let{target:t}=e;return n(r,t.value)},onFocus:u?void 0:e=>{let{target:t}=e;return d(r,t.value)},value:`${c}`},Array.isArray(f)&&f.map(((e,a)=>{let{value:l,label:n}=e;return D.default.createElement(Z.default,{id:`${r}-${l}`,name:r,autoFocus:0===a&&t,disabled:Array.isArray(p)&&-1!==p.indexOf(c),key:l,value:`${l}`},n)})))},RangeWidget:e=>{let{autofocus:t,disabled:a,formContext:l,id:r,onBlur:o,onChange:d,onFocus:i,options:u,placeholder:s,readonly:c,schema:m,value:f}=e;const{readonlyAsDisabled:p=!0}=l,{min:y,max:g,step:h}=n.rangeSpec(m),v=u.emptyValue||"";return D.default.createElement(ee.default,{autoFocus:t,disabled:a||p&&c,id:r,max:g,min:y,onChange:c?void 0:e=>d(""===e?v:e),range:!1,step:h,value:f,placeholder:s,onBlur:c?void 0:()=>o(r,f),onFocus:c?void 0:()=>i(r,f)})},SelectWidget:Te,TextareaWidget:e=>{let{disabled:t,formContext:a,id:l,onBlur:r,onChange:n,onFocus:o,options:d,placeholder:i,readonly:u,value:s}=e;const{readonlyAsDisabled:c=!0}=a;return D.default.createElement(P.default.TextArea,{disabled:t||c&&u,id:l,name:l,onBlur:u?void 0:e=>{let{target:t}=e;return r(l,t.value)},onChange:u?void 0:e=>{let{target:t}=e;return n(""===t.value?d.emptyValue:t.value)},onFocus:u?void 0:e=>{let{target:t}=e;return o(l,t.value)},placeholder:i,rows:d.rows||4,style:Fe,value:s,type:"textarea"})}},Be={templates:ve,widgets:ke},De=e.withTheme(Be);exports.Form=De,exports.Templates=ve,exports.Theme=Be,exports.Widgets=ke,exports.default=De;
//# sourceMappingURL=antd.cjs.production.min.js.map
